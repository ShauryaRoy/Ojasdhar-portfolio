{"ast":null,"code":"/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport { __assign, __extends, __read, __spreadArray } from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { normalizeKey } from '@material/dom/keyboard';\nimport { cssClasses, numbers, strings } from './constants';\nimport { preventDefaultEvent } from './events';\nimport * as typeahead from './typeahead';\nfunction isNumberArray(selectedIndex) {\n  return selectedIndex instanceof Array;\n}\n/** List of modifier keys to consider while handling keyboard events. */\nvar handledModifierKeys = ['Alt', 'Control', 'Meta', 'Shift'];\n/** Checks if the event has the given modifier keys. */\nfunction createModifierChecker(event) {\n  var eventModifiers = new Set(event ? handledModifierKeys.filter(function (m) {\n    return event.getModifierState(m);\n  }) : []);\n  return function (modifiers) {\n    return modifiers.every(function (m) {\n      return eventModifiers.has(m);\n    }) && modifiers.length === eventModifiers.size;\n  };\n}\nvar MDCListFoundation = /** @class */function (_super) {\n  __extends(MDCListFoundation, _super);\n  function MDCListFoundation(adapter) {\n    var _this = _super.call(this, __assign(__assign({}, MDCListFoundation.defaultAdapter), adapter)) || this;\n    _this.wrapFocus = false;\n    _this.isVertical = true;\n    _this.isSingleSelectionList = false;\n    _this.areDisabledItemsFocusable = true;\n    _this.selectedIndex = numbers.UNSET_INDEX;\n    _this.focusedItemIndex = numbers.UNSET_INDEX;\n    _this.useActivatedClass = false;\n    _this.useSelectedAttr = false;\n    _this.ariaCurrentAttrValue = null;\n    _this.isCheckboxList = false;\n    _this.isRadioList = false;\n    _this.lastSelectedIndex = null;\n    _this.hasTypeahead = false;\n    // Transiently holds current typeahead prefix from user.\n    _this.typeaheadState = typeahead.initState();\n    _this.sortedIndexByFirstChar = new Map();\n    return _this;\n  }\n  Object.defineProperty(MDCListFoundation, \"strings\", {\n    get: function () {\n      return strings;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MDCListFoundation, \"cssClasses\", {\n    get: function () {\n      return cssClasses;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MDCListFoundation, \"numbers\", {\n    get: function () {\n      return numbers;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MDCListFoundation, \"defaultAdapter\", {\n    get: function () {\n      return {\n        addClassForElementIndex: function () {\n          return undefined;\n        },\n        focusItemAtIndex: function () {\n          return undefined;\n        },\n        getAttributeForElementIndex: function () {\n          return null;\n        },\n        getFocusedElementIndex: function () {\n          return 0;\n        },\n        getListItemCount: function () {\n          return 0;\n        },\n        hasCheckboxAtIndex: function () {\n          return false;\n        },\n        hasRadioAtIndex: function () {\n          return false;\n        },\n        isCheckboxCheckedAtIndex: function () {\n          return false;\n        },\n        isFocusInsideList: function () {\n          return false;\n        },\n        isRootFocused: function () {\n          return false;\n        },\n        listItemAtIndexHasClass: function () {\n          return false;\n        },\n        notifyAction: function () {\n          return undefined;\n        },\n        notifySelectionChange: function () {},\n        removeClassForElementIndex: function () {\n          return undefined;\n        },\n        setAttributeForElementIndex: function () {\n          return undefined;\n        },\n        setCheckedCheckboxOrRadioAtIndex: function () {\n          return undefined;\n        },\n        setTabIndexForListItemChildren: function () {\n          return undefined;\n        },\n        getPrimaryTextAtIndex: function () {\n          return '';\n        }\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n  MDCListFoundation.prototype.layout = function () {\n    if (this.adapter.getListItemCount() === 0) {\n      return;\n    }\n    // TODO(b/172274142): consider all items when determining the list's type.\n    if (this.adapter.hasCheckboxAtIndex(0)) {\n      this.isCheckboxList = true;\n    } else if (this.adapter.hasRadioAtIndex(0)) {\n      this.isRadioList = true;\n    } else {\n      this.maybeInitializeSingleSelection();\n    }\n    if (this.hasTypeahead) {\n      this.sortedIndexByFirstChar = this.typeaheadInitSortedIndex();\n    }\n  };\n  /** Returns the index of the item that was last focused. */\n  MDCListFoundation.prototype.getFocusedItemIndex = function () {\n    return this.focusedItemIndex;\n  };\n  /** Toggles focus wrapping with keyboard navigation. */\n  MDCListFoundation.prototype.setWrapFocus = function (value) {\n    this.wrapFocus = value;\n  };\n  /**\n   * Toggles orientation direction for keyboard navigation (true for vertical,\n   * false for horizontal).\n   */\n  MDCListFoundation.prototype.setVerticalOrientation = function (value) {\n    this.isVertical = value;\n  };\n  /** Toggles single-selection behavior. */\n  MDCListFoundation.prototype.setSingleSelection = function (value) {\n    this.isSingleSelectionList = value;\n    if (value) {\n      this.maybeInitializeSingleSelection();\n      this.selectedIndex = this.getSelectedIndexFromDOM();\n    }\n  };\n  MDCListFoundation.prototype.setDisabledItemsFocusable = function (value) {\n    this.areDisabledItemsFocusable = value;\n  };\n  /**\n   * Automatically determines whether the list is single selection list. If so,\n   * initializes the internal state to match the selected item.\n   */\n  MDCListFoundation.prototype.maybeInitializeSingleSelection = function () {\n    var selectedItemIndex = this.getSelectedIndexFromDOM();\n    if (selectedItemIndex === numbers.UNSET_INDEX) return;\n    var hasActivatedClass = this.adapter.listItemAtIndexHasClass(selectedItemIndex, cssClasses.LIST_ITEM_ACTIVATED_CLASS);\n    if (hasActivatedClass) {\n      this.setUseActivatedClass(true);\n    }\n    this.isSingleSelectionList = true;\n    this.selectedIndex = selectedItemIndex;\n  };\n  /** @return Index of the first selected item based on the DOM state. */\n  MDCListFoundation.prototype.getSelectedIndexFromDOM = function () {\n    var selectedIndex = numbers.UNSET_INDEX;\n    var listItemsCount = this.adapter.getListItemCount();\n    for (var i = 0; i < listItemsCount; i++) {\n      var hasSelectedClass = this.adapter.listItemAtIndexHasClass(i, cssClasses.LIST_ITEM_SELECTED_CLASS);\n      var hasActivatedClass = this.adapter.listItemAtIndexHasClass(i, cssClasses.LIST_ITEM_ACTIVATED_CLASS);\n      if (!(hasSelectedClass || hasActivatedClass)) {\n        continue;\n      }\n      selectedIndex = i;\n      break;\n    }\n    return selectedIndex;\n  };\n  /**\n   * Sets whether typeahead is enabled on the list.\n   * @param hasTypeahead Whether typeahead is enabled.\n   */\n  MDCListFoundation.prototype.setHasTypeahead = function (hasTypeahead) {\n    this.hasTypeahead = hasTypeahead;\n    if (hasTypeahead) {\n      this.sortedIndexByFirstChar = this.typeaheadInitSortedIndex();\n    }\n  };\n  /**\n   * @return Whether typeahead is currently matching a user-specified prefix.\n   */\n  MDCListFoundation.prototype.isTypeaheadInProgress = function () {\n    return this.hasTypeahead && typeahead.isTypingInProgress(this.typeaheadState);\n  };\n  /** Toggle use of the \"activated\" CSS class. */\n  MDCListFoundation.prototype.setUseActivatedClass = function (useActivated) {\n    this.useActivatedClass = useActivated;\n  };\n  /**\n   * Toggles use of the selected attribute (true for aria-selected, false for\n   * aria-checked).\n   */\n  MDCListFoundation.prototype.setUseSelectedAttribute = function (useSelected) {\n    this.useSelectedAttr = useSelected;\n  };\n  MDCListFoundation.prototype.getSelectedIndex = function () {\n    return this.selectedIndex;\n  };\n  MDCListFoundation.prototype.setSelectedIndex = function (index, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!this.isIndexValid(index)) {\n      return;\n    }\n    if (this.isCheckboxList) {\n      this.setCheckboxAtIndex(index, options);\n    } else if (this.isRadioList) {\n      this.setRadioAtIndex(index, options);\n    } else {\n      this.setSingleSelectionAtIndex(index, options);\n    }\n  };\n  /**\n   * Focus in handler for the list items.\n   */\n  MDCListFoundation.prototype.handleFocusIn = function (listItemIndex) {\n    if (listItemIndex >= 0) {\n      this.focusedItemIndex = listItemIndex;\n      this.adapter.setAttributeForElementIndex(listItemIndex, 'tabindex', '0');\n      this.adapter.setTabIndexForListItemChildren(listItemIndex, '0');\n    }\n  };\n  /**\n   * Focus out handler for the list items.\n   */\n  MDCListFoundation.prototype.handleFocusOut = function (listItemIndex) {\n    var _this = this;\n    if (listItemIndex >= 0) {\n      this.adapter.setAttributeForElementIndex(listItemIndex, 'tabindex', '-1');\n      this.adapter.setTabIndexForListItemChildren(listItemIndex, '-1');\n    }\n    /**\n     * Between Focusout & Focusin some browsers do not have focus on any\n     * element. Setting a delay to wait till the focus is moved to next element.\n     */\n    setTimeout(function () {\n      if (!_this.adapter.isFocusInsideList()) {\n        _this.setTabindexToFirstSelectedOrFocusedItem();\n      }\n    }, 0);\n  };\n  MDCListFoundation.prototype.isIndexDisabled = function (index) {\n    return this.adapter.listItemAtIndexHasClass(index, cssClasses.LIST_ITEM_DISABLED_CLASS);\n  };\n  /**\n   * Key handler for the list.\n   */\n  MDCListFoundation.prototype.handleKeydown = function (event, isRootListItem, listItemIndex) {\n    var _this = this;\n    var _a;\n    var isArrowLeft = normalizeKey(event) === 'ArrowLeft';\n    var isArrowUp = normalizeKey(event) === 'ArrowUp';\n    var isArrowRight = normalizeKey(event) === 'ArrowRight';\n    var isArrowDown = normalizeKey(event) === 'ArrowDown';\n    var isHome = normalizeKey(event) === 'Home';\n    var isEnd = normalizeKey(event) === 'End';\n    var isEnter = normalizeKey(event) === 'Enter';\n    var isSpace = normalizeKey(event) === 'Spacebar';\n    // The keys for forward and back differ based on list orientation.\n    var isForward = this.isVertical && isArrowDown || !this.isVertical && isArrowRight;\n    var isBack = this.isVertical && isArrowUp || !this.isVertical && isArrowLeft;\n    // Have to check both upper and lower case, because having caps lock on\n    // affects the value.\n    var isLetterA = event.key === 'A' || event.key === 'a';\n    var eventHasModifiers = createModifierChecker(event);\n    if (this.adapter.isRootFocused()) {\n      if ((isBack || isEnd) && eventHasModifiers([])) {\n        event.preventDefault();\n        this.focusLastElement();\n      } else if ((isForward || isHome) && eventHasModifiers([])) {\n        event.preventDefault();\n        this.focusFirstElement();\n      } else if (isBack && eventHasModifiers(['Shift']) && this.isCheckboxList) {\n        event.preventDefault();\n        var focusedIndex = this.focusLastElement();\n        if (focusedIndex !== -1) {\n          this.setSelectedIndexOnAction(focusedIndex, false);\n        }\n      } else if (isForward && eventHasModifiers(['Shift']) && this.isCheckboxList) {\n        event.preventDefault();\n        var focusedIndex = this.focusFirstElement();\n        if (focusedIndex !== -1) {\n          this.setSelectedIndexOnAction(focusedIndex, false);\n        }\n      }\n      if (this.hasTypeahead) {\n        var handleKeydownOpts = {\n          event: event,\n          focusItemAtIndex: function (index) {\n            _this.focusItemAtIndex(index);\n          },\n          focusedItemIndex: -1,\n          isTargetListItem: isRootListItem,\n          sortedIndexByFirstChar: this.sortedIndexByFirstChar,\n          isItemAtIndexDisabled: function (index) {\n            return _this.isIndexDisabled(index);\n          }\n        };\n        typeahead.handleKeydown(handleKeydownOpts, this.typeaheadState);\n      }\n      return;\n    }\n    var currentIndex = this.adapter.getFocusedElementIndex();\n    if (currentIndex === -1) {\n      currentIndex = listItemIndex;\n      if (currentIndex < 0) {\n        // If this event doesn't have a mdc-list-item ancestor from the\n        // current list (not from a sublist), return early.\n        return;\n      }\n    }\n    if (isForward && eventHasModifiers([])) {\n      preventDefaultEvent(event);\n      this.focusNextElement(currentIndex);\n    } else if (isBack && eventHasModifiers([])) {\n      preventDefaultEvent(event);\n      this.focusPrevElement(currentIndex);\n    } else if (isForward && eventHasModifiers(['Shift']) && this.isCheckboxList) {\n      preventDefaultEvent(event);\n      var focusedIndex = this.focusNextElement(currentIndex);\n      if (focusedIndex !== -1) {\n        this.setSelectedIndexOnAction(focusedIndex, false);\n      }\n    } else if (isBack && eventHasModifiers(['Shift']) && this.isCheckboxList) {\n      preventDefaultEvent(event);\n      var focusedIndex = this.focusPrevElement(currentIndex);\n      if (focusedIndex !== -1) {\n        this.setSelectedIndexOnAction(focusedIndex, false);\n      }\n    } else if (isHome && eventHasModifiers([])) {\n      preventDefaultEvent(event);\n      this.focusFirstElement();\n    } else if (isEnd && eventHasModifiers([])) {\n      preventDefaultEvent(event);\n      this.focusLastElement();\n    } else if (isHome && eventHasModifiers(['Control', 'Shift']) && this.isCheckboxList) {\n      preventDefaultEvent(event);\n      if (this.isIndexDisabled(currentIndex)) {\n        return;\n      }\n      this.focusFirstElement();\n      this.toggleCheckboxRange(0, currentIndex, currentIndex);\n    } else if (isEnd && eventHasModifiers(['Control', 'Shift']) && this.isCheckboxList) {\n      preventDefaultEvent(event);\n      if (this.isIndexDisabled(currentIndex)) {\n        return;\n      }\n      this.focusLastElement();\n      this.toggleCheckboxRange(currentIndex, this.adapter.getListItemCount() - 1, currentIndex);\n    } else if (isLetterA && eventHasModifiers(['Control']) && this.isCheckboxList) {\n      event.preventDefault();\n      this.checkboxListToggleAll(this.selectedIndex === numbers.UNSET_INDEX ? [] : this.selectedIndex, true);\n    } else if ((isEnter || isSpace) && eventHasModifiers([])) {\n      if (isRootListItem) {\n        // Return early if enter key is pressed on anchor element which triggers\n        // synthetic MouseEvent event.\n        var target = event.target;\n        if (target && target.tagName === 'A' && isEnter) {\n          return;\n        }\n        preventDefaultEvent(event);\n        if (this.isIndexDisabled(currentIndex)) {\n          return;\n        }\n        if (!this.isTypeaheadInProgress()) {\n          if (this.isSelectableList()) {\n            this.setSelectedIndexOnAction(currentIndex, false);\n          }\n          this.adapter.notifyAction(currentIndex);\n        }\n      }\n    } else if ((isEnter || isSpace) && eventHasModifiers(['Shift']) && this.isCheckboxList) {\n      // Return early if enter key is pressed on anchor element which triggers\n      // synthetic MouseEvent event.\n      var target = event.target;\n      if (target && target.tagName === 'A' && isEnter) {\n        return;\n      }\n      preventDefaultEvent(event);\n      if (this.isIndexDisabled(currentIndex)) {\n        return;\n      }\n      if (!this.isTypeaheadInProgress()) {\n        this.toggleCheckboxRange((_a = this.lastSelectedIndex) !== null && _a !== void 0 ? _a : currentIndex, currentIndex, currentIndex);\n        this.adapter.notifyAction(currentIndex);\n      }\n    }\n    if (this.hasTypeahead) {\n      var handleKeydownOpts = {\n        event: event,\n        focusItemAtIndex: function (index) {\n          _this.focusItemAtIndex(index);\n        },\n        focusedItemIndex: this.focusedItemIndex,\n        isTargetListItem: isRootListItem,\n        sortedIndexByFirstChar: this.sortedIndexByFirstChar,\n        isItemAtIndexDisabled: function (index) {\n          return _this.isIndexDisabled(index);\n        }\n      };\n      typeahead.handleKeydown(handleKeydownOpts, this.typeaheadState);\n    }\n  };\n  /**\n   * Click handler for the list.\n   *\n   * @param index Index for the item that has been clicked.\n   * @param isCheckboxAlreadyUpdatedInAdapter Whether the checkbox for\n   *   the list item has already been updated in the adapter. This attribute\n   *   should be set to `true` when e.g. the click event directly landed on\n   *   the underlying native checkbox element which would cause the checked\n   *   state to be already toggled within `adapter.isCheckboxCheckedAtIndex`.\n   */\n  MDCListFoundation.prototype.handleClick = function (index, isCheckboxAlreadyUpdatedInAdapter, event) {\n    var _a;\n    var eventHasModifiers = createModifierChecker(event);\n    if (index === numbers.UNSET_INDEX) {\n      return;\n    }\n    if (this.isIndexDisabled(index)) {\n      return;\n    }\n    if (eventHasModifiers([])) {\n      if (this.isSelectableList()) {\n        this.setSelectedIndexOnAction(index, isCheckboxAlreadyUpdatedInAdapter);\n      }\n      this.adapter.notifyAction(index);\n    } else if (this.isCheckboxList && eventHasModifiers(['Shift'])) {\n      this.toggleCheckboxRange((_a = this.lastSelectedIndex) !== null && _a !== void 0 ? _a : index, index, index);\n      this.adapter.notifyAction(index);\n    }\n  };\n  /**\n   * Focuses the next element on the list.\n   */\n  MDCListFoundation.prototype.focusNextElement = function (index) {\n    var count = this.adapter.getListItemCount();\n    var nextIndex = index;\n    var firstChecked = null;\n    do {\n      nextIndex++;\n      if (nextIndex >= count) {\n        if (this.wrapFocus) {\n          nextIndex = 0;\n        } else {\n          // Return early because last item is already focused.\n          return index;\n        }\n      }\n      if (nextIndex === firstChecked) {\n        return -1;\n      }\n      firstChecked = firstChecked !== null && firstChecked !== void 0 ? firstChecked : nextIndex;\n    } while (!this.areDisabledItemsFocusable && this.isIndexDisabled(nextIndex));\n    this.focusItemAtIndex(nextIndex);\n    return nextIndex;\n  };\n  /**\n   * Focuses the previous element on the list.\n   */\n  MDCListFoundation.prototype.focusPrevElement = function (index) {\n    var count = this.adapter.getListItemCount();\n    var prevIndex = index;\n    var firstChecked = null;\n    do {\n      prevIndex--;\n      if (prevIndex < 0) {\n        if (this.wrapFocus) {\n          prevIndex = count - 1;\n        } else {\n          // Return early because first item is already focused.\n          return index;\n        }\n      }\n      if (prevIndex === firstChecked) {\n        return -1;\n      }\n      firstChecked = firstChecked !== null && firstChecked !== void 0 ? firstChecked : prevIndex;\n    } while (!this.areDisabledItemsFocusable && this.isIndexDisabled(prevIndex));\n    this.focusItemAtIndex(prevIndex);\n    return prevIndex;\n  };\n  MDCListFoundation.prototype.focusFirstElement = function () {\n    // Pass -1 to `focusNextElement`, since it will incremement to 0 and focus\n    // the first element.\n    return this.focusNextElement(-1);\n  };\n  MDCListFoundation.prototype.focusLastElement = function () {\n    // Pass the length of the list to `focusNextElement` since it will decrement\n    // to length - 1 and focus the last element.\n    return this.focusPrevElement(this.adapter.getListItemCount());\n  };\n  MDCListFoundation.prototype.focusInitialElement = function () {\n    var initialIndex = this.getFirstSelectedOrFocusedItemIndex();\n    this.focusItemAtIndex(initialIndex);\n    return initialIndex;\n  };\n  /**\n   * @param itemIndex Index of the list item\n   * @param isEnabled Sets the list item to enabled or disabled.\n   */\n  MDCListFoundation.prototype.setEnabled = function (itemIndex, isEnabled) {\n    if (!this.isIndexValid(itemIndex, false)) {\n      return;\n    }\n    if (isEnabled) {\n      this.adapter.removeClassForElementIndex(itemIndex, cssClasses.LIST_ITEM_DISABLED_CLASS);\n      this.adapter.setAttributeForElementIndex(itemIndex, strings.ARIA_DISABLED, 'false');\n    } else {\n      this.adapter.addClassForElementIndex(itemIndex, cssClasses.LIST_ITEM_DISABLED_CLASS);\n      this.adapter.setAttributeForElementIndex(itemIndex, strings.ARIA_DISABLED, 'true');\n    }\n  };\n  MDCListFoundation.prototype.setSingleSelectionAtIndex = function (index, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (this.selectedIndex === index && !options.forceUpdate) {\n      return;\n    }\n    var selectedClassName = cssClasses.LIST_ITEM_SELECTED_CLASS;\n    if (this.useActivatedClass) {\n      selectedClassName = cssClasses.LIST_ITEM_ACTIVATED_CLASS;\n    }\n    if (this.selectedIndex !== numbers.UNSET_INDEX) {\n      this.adapter.removeClassForElementIndex(this.selectedIndex, selectedClassName);\n    }\n    this.setAriaForSingleSelectionAtIndex(index);\n    this.setTabindexAtIndex(index);\n    if (index !== numbers.UNSET_INDEX) {\n      this.adapter.addClassForElementIndex(index, selectedClassName);\n    }\n    this.selectedIndex = index;\n    // If the selected value has changed through user interaction,\n    // we want to notify the selection change to the adapter.\n    if (options.isUserInteraction && !options.forceUpdate) {\n      this.adapter.notifySelectionChange([index]);\n    }\n  };\n  /**\n   * Sets aria attribute for single selection at given index.\n   */\n  MDCListFoundation.prototype.setAriaForSingleSelectionAtIndex = function (index) {\n    // Detect the presence of aria-current and get the value only during list\n    // initialization when it is in unset state.\n    if (this.selectedIndex === numbers.UNSET_INDEX) {\n      this.ariaCurrentAttrValue = this.adapter.getAttributeForElementIndex(index, strings.ARIA_CURRENT);\n    }\n    var isAriaCurrent = this.ariaCurrentAttrValue !== null;\n    var ariaAttribute = isAriaCurrent ? strings.ARIA_CURRENT : strings.ARIA_SELECTED;\n    if (this.selectedIndex !== numbers.UNSET_INDEX) {\n      this.adapter.setAttributeForElementIndex(this.selectedIndex, ariaAttribute, 'false');\n    }\n    if (index !== numbers.UNSET_INDEX) {\n      var ariaAttributeValue = isAriaCurrent ? this.ariaCurrentAttrValue : 'true';\n      this.adapter.setAttributeForElementIndex(index, ariaAttribute, ariaAttributeValue);\n    }\n  };\n  /**\n   * Returns the attribute to use for indicating selection status.\n   */\n  MDCListFoundation.prototype.getSelectionAttribute = function () {\n    return this.useSelectedAttr ? strings.ARIA_SELECTED : strings.ARIA_CHECKED;\n  };\n  /**\n   * Toggles radio at give index. Radio doesn't change the checked state if it\n   * is already checked.\n   */\n  MDCListFoundation.prototype.setRadioAtIndex = function (index, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var selectionAttribute = this.getSelectionAttribute();\n    this.adapter.setCheckedCheckboxOrRadioAtIndex(index, true);\n    if (this.selectedIndex === index && !options.forceUpdate) {\n      return;\n    }\n    if (this.selectedIndex !== numbers.UNSET_INDEX) {\n      this.adapter.setAttributeForElementIndex(this.selectedIndex, selectionAttribute, 'false');\n    }\n    this.adapter.setAttributeForElementIndex(index, selectionAttribute, 'true');\n    this.selectedIndex = index;\n    // If the selected value has changed through user interaction,\n    // we want to notify the selection change to the adapter.\n    if (options.isUserInteraction && !options.forceUpdate) {\n      this.adapter.notifySelectionChange([index]);\n    }\n  };\n  MDCListFoundation.prototype.setCheckboxAtIndex = function (index, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var currentIndex = this.selectedIndex;\n    // If this update is not triggered by a user interaction, we do not\n    // need to know about the currently selected indices and can avoid\n    // constructing the `Set` for performance reasons.\n    var currentlySelected = options.isUserInteraction ? new Set(currentIndex === numbers.UNSET_INDEX ? [] : currentIndex) : null;\n    var selectionAttribute = this.getSelectionAttribute();\n    var changedIndices = [];\n    for (var i = 0; i < this.adapter.getListItemCount(); i++) {\n      var previousIsChecked = currentlySelected === null || currentlySelected === void 0 ? void 0 : currentlySelected.has(i);\n      var newIsChecked = index.indexOf(i) >= 0;\n      // If the selection has changed for this item, we keep track of it\n      // so that we can notify the adapter.\n      if (newIsChecked !== previousIsChecked) {\n        changedIndices.push(i);\n      }\n      this.adapter.setCheckedCheckboxOrRadioAtIndex(i, newIsChecked);\n      this.adapter.setAttributeForElementIndex(i, selectionAttribute, newIsChecked ? 'true' : 'false');\n    }\n    this.selectedIndex = index;\n    // If the selected value has changed through user interaction,\n    // we want to notify the selection change to the adapter.\n    if (options.isUserInteraction && changedIndices.length) {\n      this.adapter.notifySelectionChange(changedIndices);\n    }\n  };\n  /**\n   * Toggles the state of all checkboxes in the given range (inclusive) based on\n   * the state of the checkbox at the `toggleIndex`. To determine whether to set\n   * the given range to checked or unchecked, read the value of the checkbox at\n   * the `toggleIndex` and negate it. Then apply that new checked state to all\n   * checkboxes in the range.\n   * @param fromIndex The start of the range of checkboxes to toggle\n   * @param toIndex The end of the range of checkboxes to toggle\n   * @param toggleIndex The index that will be used to determine the new state\n   *     of the given checkbox range.\n   */\n  MDCListFoundation.prototype.toggleCheckboxRange = function (fromIndex, toIndex, toggleIndex) {\n    this.lastSelectedIndex = toggleIndex;\n    var currentlySelected = new Set(this.selectedIndex === numbers.UNSET_INDEX ? [] : this.selectedIndex);\n    var newIsChecked = !(currentlySelected === null || currentlySelected === void 0 ? void 0 : currentlySelected.has(toggleIndex));\n    var _a = __read([fromIndex, toIndex].sort(), 2),\n      startIndex = _a[0],\n      endIndex = _a[1];\n    var selectionAttribute = this.getSelectionAttribute();\n    var changedIndices = [];\n    for (var i = startIndex; i <= endIndex; i++) {\n      if (this.isIndexDisabled(i)) {\n        continue;\n      }\n      var previousIsChecked = currentlySelected.has(i);\n      // If the selection has changed for this item, we keep track of it\n      // so that we can notify the adapter.\n      if (newIsChecked !== previousIsChecked) {\n        changedIndices.push(i);\n        this.adapter.setCheckedCheckboxOrRadioAtIndex(i, newIsChecked);\n        this.adapter.setAttributeForElementIndex(i, selectionAttribute, \"\" + newIsChecked);\n        if (newIsChecked) {\n          currentlySelected.add(i);\n        } else {\n          currentlySelected.delete(i);\n        }\n      }\n    }\n    // If the selected value has changed, update and notify the selection change\n    // to the adapter.\n    if (changedIndices.length) {\n      this.selectedIndex = __spreadArray([], __read(currentlySelected));\n      this.adapter.notifySelectionChange(changedIndices);\n    }\n  };\n  MDCListFoundation.prototype.setTabindexAtIndex = function (index) {\n    if (this.focusedItemIndex === numbers.UNSET_INDEX && index !== 0) {\n      // If some list item was selected set first list item's tabindex to -1.\n      // Generally, tabindex is set to 0 on first list item of list that has no\n      // preselected items.\n      this.adapter.setAttributeForElementIndex(0, 'tabindex', '-1');\n    } else if (this.focusedItemIndex >= 0 && this.focusedItemIndex !== index) {\n      this.adapter.setAttributeForElementIndex(this.focusedItemIndex, 'tabindex', '-1');\n    }\n    // Set the previous selection's tabindex to -1. We need this because\n    // in selection menus that are not visible, programmatically setting an\n    // option will not change focus but will change where tabindex should be 0.\n    if (!(this.selectedIndex instanceof Array) && this.selectedIndex !== index) {\n      this.adapter.setAttributeForElementIndex(this.selectedIndex, 'tabindex', '-1');\n    }\n    if (index !== numbers.UNSET_INDEX) {\n      this.adapter.setAttributeForElementIndex(index, 'tabindex', '0');\n    }\n  };\n  /**\n   * @return Return true if it is single selectin list, checkbox list or radio\n   *     list.\n   */\n  MDCListFoundation.prototype.isSelectableList = function () {\n    return this.isSingleSelectionList || this.isCheckboxList || this.isRadioList;\n  };\n  MDCListFoundation.prototype.setTabindexToFirstSelectedOrFocusedItem = function () {\n    var targetIndex = this.getFirstSelectedOrFocusedItemIndex();\n    this.setTabindexAtIndex(targetIndex);\n  };\n  MDCListFoundation.prototype.getFirstSelectedOrFocusedItemIndex = function () {\n    // Action lists retain focus on the most recently focused item.\n    if (!this.isSelectableList()) {\n      return Math.max(this.focusedItemIndex, 0);\n    }\n    // Single-selection lists focus the selected item.\n    if (typeof this.selectedIndex === 'number' && this.selectedIndex !== numbers.UNSET_INDEX) {\n      return this.selectedIndex;\n    }\n    // Multiple-selection lists focus the first selected item.\n    if (isNumberArray(this.selectedIndex) && this.selectedIndex.length > 0) {\n      return this.selectedIndex.reduce(function (minIndex, currentIndex) {\n        return Math.min(minIndex, currentIndex);\n      });\n    }\n    // Selection lists without a selection focus the first item.\n    return 0;\n  };\n  MDCListFoundation.prototype.isIndexValid = function (index, validateListType) {\n    var _this = this;\n    if (validateListType === void 0) {\n      validateListType = true;\n    }\n    if (index instanceof Array) {\n      if (!this.isCheckboxList && validateListType) {\n        throw new Error('MDCListFoundation: Array of index is only supported for checkbox based list');\n      }\n      if (index.length === 0) {\n        return true;\n      } else {\n        return index.some(function (i) {\n          return _this.isIndexInRange(i);\n        });\n      }\n    } else if (typeof index === 'number') {\n      if (this.isCheckboxList && validateListType) {\n        throw new Error(\"MDCListFoundation: Expected array of index for checkbox based list but got number: \" + index);\n      }\n      return this.isIndexInRange(index) || this.isSingleSelectionList && index === numbers.UNSET_INDEX;\n    } else {\n      return false;\n    }\n  };\n  MDCListFoundation.prototype.isIndexInRange = function (index) {\n    var listSize = this.adapter.getListItemCount();\n    return index >= 0 && index < listSize;\n  };\n  /**\n   * Sets selected index on user action, toggles checkboxes in checkbox lists\n   * by default, unless `isCheckboxAlreadyUpdatedInAdapter` is set to `true`.\n   *\n   * In cases where `isCheckboxAlreadyUpdatedInAdapter` is set to `true`, the\n   * UI is just updated to reflect the value returned by the adapter.\n   *\n   * When calling this, make sure user interaction does not toggle disabled\n   * list items.\n   */\n  MDCListFoundation.prototype.setSelectedIndexOnAction = function (index, isCheckboxAlreadyUpdatedInAdapter) {\n    this.lastSelectedIndex = index;\n    if (this.isCheckboxList) {\n      this.toggleCheckboxAtIndex(index, isCheckboxAlreadyUpdatedInAdapter);\n      this.adapter.notifySelectionChange([index]);\n    } else {\n      this.setSelectedIndex(index, {\n        isUserInteraction: true\n      });\n    }\n  };\n  MDCListFoundation.prototype.toggleCheckboxAtIndex = function (index, isCheckboxAlreadyUpdatedInAdapter) {\n    var selectionAttribute = this.getSelectionAttribute();\n    var adapterIsChecked = this.adapter.isCheckboxCheckedAtIndex(index);\n    // By default the checked value from the adapter is toggled unless the\n    // checked state in the adapter has already been updated beforehand.\n    // This can be happen when the underlying native checkbox has already\n    // been updated through the native click event.\n    var newCheckedValue;\n    if (isCheckboxAlreadyUpdatedInAdapter) {\n      newCheckedValue = adapterIsChecked;\n    } else {\n      newCheckedValue = !adapterIsChecked;\n      this.adapter.setCheckedCheckboxOrRadioAtIndex(index, newCheckedValue);\n    }\n    this.adapter.setAttributeForElementIndex(index, selectionAttribute, newCheckedValue ? 'true' : 'false');\n    // If none of the checkbox items are selected and selectedIndex is not\n    // initialized then provide a default value.\n    var selectedIndexes = this.selectedIndex === numbers.UNSET_INDEX ? [] : this.selectedIndex.slice();\n    if (newCheckedValue) {\n      selectedIndexes.push(index);\n    } else {\n      selectedIndexes = selectedIndexes.filter(function (i) {\n        return i !== index;\n      });\n    }\n    this.selectedIndex = selectedIndexes;\n  };\n  MDCListFoundation.prototype.focusItemAtIndex = function (index) {\n    this.adapter.focusItemAtIndex(index);\n    this.focusedItemIndex = index;\n  };\n  MDCListFoundation.prototype.checkboxListToggleAll = function (currentlySelectedIndexes, isUserInteraction) {\n    var count = this.adapter.getListItemCount();\n    // If all items are selected, deselect everything.\n    if (currentlySelectedIndexes.length === count) {\n      this.setCheckboxAtIndex([], {\n        isUserInteraction: isUserInteraction\n      });\n    } else {\n      // Otherwise select all enabled options.\n      var allIndexes = [];\n      for (var i = 0; i < count; i++) {\n        if (!this.isIndexDisabled(i) || currentlySelectedIndexes.indexOf(i) > -1) {\n          allIndexes.push(i);\n        }\n      }\n      this.setCheckboxAtIndex(allIndexes, {\n        isUserInteraction: isUserInteraction\n      });\n    }\n  };\n  /**\n   * Given the next desired character from the user, adds it to the typeahead\n   * buffer. Then, attempts to find the next option matching the buffer. Wraps\n   * around if at the end of options.\n   *\n   * @param nextChar The next character to add to the prefix buffer.\n   * @param startingIndex The index from which to start matching. Only relevant\n   *     when starting a new match sequence. To start a new match sequence,\n   *     clear the buffer using `clearTypeaheadBuffer`, or wait for the buffer\n   *     to clear after a set interval defined in list foundation. Defaults to\n   *     the currently focused index.\n   * @return The index of the matched item, or -1 if no match.\n   */\n  MDCListFoundation.prototype.typeaheadMatchItem = function (nextChar, startingIndex, skipFocus) {\n    var _this = this;\n    if (skipFocus === void 0) {\n      skipFocus = false;\n    }\n    var opts = {\n      focusItemAtIndex: function (index) {\n        _this.focusItemAtIndex(index);\n      },\n      focusedItemIndex: startingIndex ? startingIndex : this.focusedItemIndex,\n      nextChar: nextChar,\n      sortedIndexByFirstChar: this.sortedIndexByFirstChar,\n      skipFocus: skipFocus,\n      isItemAtIndexDisabled: function (index) {\n        return _this.isIndexDisabled(index);\n      }\n    };\n    return typeahead.matchItem(opts, this.typeaheadState);\n  };\n  /**\n   * Initializes the MDCListTextAndIndex data structure by indexing the current\n   * list items by primary text.\n   *\n   * @return The primary texts of all the list items sorted by first character.\n   */\n  MDCListFoundation.prototype.typeaheadInitSortedIndex = function () {\n    return typeahead.initSortedIndex(this.adapter.getListItemCount(), this.adapter.getPrimaryTextAtIndex);\n  };\n  /**\n   * Clears the typeahead buffer.\n   */\n  MDCListFoundation.prototype.clearTypeaheadBuffer = function () {\n    typeahead.clearBuffer(this.typeaheadState);\n  };\n  return MDCListFoundation;\n}(MDCFoundation);\nexport { MDCListFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCListFoundation;","map":{"version":3,"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAAQA,aAAa,QAAO,2BAA2B;AACvD,SAAQC,YAAY,QAAO,wBAAwB;AAGnD,SAAQC,UAAU,EAAEC,OAAO,EAAEC,OAAO,QAAO,aAAa;AACxD,SAAQC,mBAAmB,QAAO,UAAU;AAC5C,OAAO,KAAKC,SAAS,MAAM,aAAa;AAGxC,SAASC,aAAa,CAACC,aAA2B;EAChD,OAAOA,aAAa,YAAYC,KAAK;AACvC;AAaA;AACA,IAAMC,mBAAmB,GAAG,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,OAAO,CAAU;AAKxE;AACA,SAASC,qBAAqB,CAACC,KAAgC;EAC7D,IAAMC,cAAc,GAAG,IAAIC,GAAG,CAC1BF,KAAK,GAAGF,mBAAmB,CAACK,MAAM,CAAC,WAAC;IAAI,YAAK,CAACC,gBAAgB,CAACC,CAAC,CAAC;EAAzB,CAAyB,CAAC,GAAG,EAAE,CAAC;EAC5E,OAAO,UAACC,SAAwB;IACrB,gBAAS,CAACC,KAAK,CAAC,WAAC;MAAI,qBAAc,CAACC,GAAG,CAACH,CAAC,CAAC;IAArB,CAAqB,CAAC,IAClDC,SAAS,CAACG,MAAM,KAAKR,cAAc,CAACS,IAAI;EADjC,CACiC;AAC9C;AAEA;EAAuCC;EAsDrC,2BAAYC,OAAiC;IAA7C,YACEC,wCAAUC,iBAAiB,CAACC,cAAc,GAAKH,OAAO,EAAE;IAnBlDI,eAAS,GAAG,KAAK;IACjBA,gBAAU,GAAG,IAAI;IACjBA,2BAAqB,GAAG,KAAK;IAC7BA,+BAAyB,GAAG,IAAI;IAChCA,mBAAa,GAAiBzB,OAAO,CAAC0B,WAAW;IACjDD,sBAAgB,GAAGzB,OAAO,CAAC0B,WAAW;IACtCD,uBAAiB,GAAG,KAAK;IACzBA,qBAAe,GAAG,KAAK;IACvBA,0BAAoB,GAAgB,IAAI;IACxCA,oBAAc,GAAG,KAAK;IACtBA,iBAAW,GAAG,KAAK;IACnBA,uBAAiB,GAAgB,IAAI;IAErCA,kBAAY,GAAG,KAAK;IAC5B;IACiBA,oBAAc,GAAGtB,SAAS,CAACwB,SAAS,EAAE;IAC/CF,4BAAsB,GAAG,IAAIG,GAAG,EAAiC;;EAIzE;EAvDAC,sBAAoBN,4BAAO;SAA3B;MACE,OAAOtB,OAAO;IAChB,CAAC;;;;EAED4B,sBAAoBN,+BAAU;SAA9B;MACE,OAAOxB,UAAU;IACnB,CAAC;;;;EAED8B,sBAAoBN,4BAAO;SAA3B;MACE,OAAOvB,OAAO;IAChB,CAAC;;;;EAED6B,sBAAoBN,mCAAc;SAAlC;MACE,OAAO;QACLO,uBAAuB,EAAE;UAAM,gBAAS;QAAT,CAAS;QACxCC,gBAAgB,EAAE;UAAM,gBAAS;QAAT,CAAS;QACjCC,2BAA2B,EAAE;UAAM,WAAI;QAAJ,CAAI;QACvCC,sBAAsB,EAAE;UAAM,QAAC;QAAD,CAAC;QAC/BC,gBAAgB,EAAE;UAAM,QAAC;QAAD,CAAC;QACzBC,kBAAkB,EAAE;UAAM,YAAK;QAAL,CAAK;QAC/BC,eAAe,EAAE;UAAM,YAAK;QAAL,CAAK;QAC5BC,wBAAwB,EAAE;UAAM,YAAK;QAAL,CAAK;QACrCC,iBAAiB,EAAE;UAAM,YAAK;QAAL,CAAK;QAC9BC,aAAa,EAAE;UAAM,YAAK;QAAL,CAAK;QAC1BC,uBAAuB,EAAE;UAAM,YAAK;QAAL,CAAK;QACpCC,YAAY,EAAE;UAAM,gBAAS;QAAT,CAAS;QAC7BC,qBAAqB,EAAE,aAAO,CAAC;QAC/BC,0BAA0B,EAAE;UAAM,gBAAS;QAAT,CAAS;QAC3CC,2BAA2B,EAAE;UAAM,gBAAS;QAAT,CAAS;QAC5CC,gCAAgC,EAAE;UAAM,gBAAS;QAAT,CAAS;QACjDC,8BAA8B,EAAE;UAAM,gBAAS;QAAT,CAAS;QAC/CC,qBAAqB,EAAE;UAAM,SAAE;QAAF;OAC9B;IACH,CAAC;;;;EAwBDxB,kCAAM,GAAN;IACE,IAAI,IAAI,CAACF,OAAO,CAACa,gBAAgB,EAAE,KAAK,CAAC,EAAE;MACzC;;IAGF;IACA,IAAI,IAAI,CAACb,OAAO,CAACc,kBAAkB,CAAC,CAAC,CAAC,EAAE;MACtC,IAAI,CAACa,cAAc,GAAG,IAAI;KAC3B,MAAM,IAAI,IAAI,CAAC3B,OAAO,CAACe,eAAe,CAAC,CAAC,CAAC,EAAE;MAC1C,IAAI,CAACa,WAAW,GAAG,IAAI;KACxB,MAAM;MACL,IAAI,CAACC,8BAA8B,EAAE;;IAGvC,IAAI,IAAI,CAACC,YAAY,EAAE;MACrB,IAAI,CAACC,sBAAsB,GAAG,IAAI,CAACC,wBAAwB,EAAE;;EAEjE,CAAC;EAED;EACA9B,+CAAmB,GAAnB;IACE,OAAO,IAAI,CAAC+B,gBAAgB;EAC9B,CAAC;EAED;EACA/B,wCAAY,GAAZ,UAAagC,KAAc;IACzB,IAAI,CAACC,SAAS,GAAGD,KAAK;EACxB,CAAC;EAED;;;;EAIAhC,kDAAsB,GAAtB,UAAuBgC,KAAc;IACnC,IAAI,CAACE,UAAU,GAAGF,KAAK;EACzB,CAAC;EAED;EACAhC,8CAAkB,GAAlB,UAAmBgC,KAAc;IAC/B,IAAI,CAACG,qBAAqB,GAAGH,KAAK;IAClC,IAAIA,KAAK,EAAE;MACT,IAAI,CAACL,8BAA8B,EAAE;MACrC,IAAI,CAAC7C,aAAa,GAAG,IAAI,CAACsD,uBAAuB,EAAE;;EAEvD,CAAC;EAEDpC,qDAAyB,GAAzB,UAA0BgC,KAAc;IACtC,IAAI,CAACK,yBAAyB,GAAGL,KAAK;EACxC,CAAC;EAED;;;;EAIQhC,0DAA8B,GAAtC;IACE,IAAMsC,iBAAiB,GAAG,IAAI,CAACF,uBAAuB,EAAE;IACxD,IAAIE,iBAAiB,KAAK7D,OAAO,CAAC0B,WAAW,EAAE;IAE/C,IAAMoC,iBAAiB,GAAG,IAAI,CAACzC,OAAO,CAACmB,uBAAuB,CAC1DqB,iBAAiB,EAAE9D,UAAU,CAACgE,yBAAyB,CAAC;IAC5D,IAAID,iBAAiB,EAAE;MACrB,IAAI,CAACE,oBAAoB,CAAC,IAAI,CAAC;;IAEjC,IAAI,CAACN,qBAAqB,GAAG,IAAI;IACjC,IAAI,CAACrD,aAAa,GAAGwD,iBAAiB;EACxC,CAAC;EAED;EACQtC,mDAAuB,GAA/B;IACE,IAAIlB,aAAa,GAAGL,OAAO,CAAC0B,WAAW;IACvC,IAAMuC,cAAc,GAAG,IAAI,CAAC5C,OAAO,CAACa,gBAAgB,EAAE;IACtD,KAAK,IAAIgC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,cAAc,EAAEC,CAAC,EAAE,EAAE;MACvC,IAAMC,gBAAgB,GAAG,IAAI,CAAC9C,OAAO,CAACmB,uBAAuB,CACzD0B,CAAC,EAAEnE,UAAU,CAACqE,wBAAwB,CAAC;MAC3C,IAAMN,iBAAiB,GAAG,IAAI,CAACzC,OAAO,CAACmB,uBAAuB,CAC1D0B,CAAC,EAAEnE,UAAU,CAACgE,yBAAyB,CAAC;MAC5C,IAAI,EAAEI,gBAAgB,IAAIL,iBAAiB,CAAC,EAAE;QAC5C;;MAGFzD,aAAa,GAAG6D,CAAC;MACjB;;IAGF,OAAO7D,aAAa;EACtB,CAAC;EAED;;;;EAIAkB,2CAAe,GAAf,UAAgB4B,YAAqB;IACnC,IAAI,CAACA,YAAY,GAAGA,YAAY;IAChC,IAAIA,YAAY,EAAE;MAChB,IAAI,CAACC,sBAAsB,GAAG,IAAI,CAACC,wBAAwB,EAAE;;EAEjE,CAAC;EAED;;;EAGA9B,iDAAqB,GAArB;IACE,OAAO,IAAI,CAAC4B,YAAY,IACpBhD,SAAS,CAACkE,kBAAkB,CAAC,IAAI,CAACC,cAAc,CAAC;EACvD,CAAC;EAED;EACA/C,gDAAoB,GAApB,UAAqBgD,YAAqB;IACxC,IAAI,CAACC,iBAAiB,GAAGD,YAAY;EACvC,CAAC;EAED;;;;EAIAhD,mDAAuB,GAAvB,UAAwBkD,WAAoB;IAC1C,IAAI,CAACC,eAAe,GAAGD,WAAW;EACpC,CAAC;EAEDlD,4CAAgB,GAAhB;IACE,OAAO,IAAI,CAAClB,aAAa;EAC3B,CAAC;EAEDkB,4CAAgB,GAAhB,UAAiBoD,KAAmB,EAAEC,OAAoC;IAApC;MAAAA,YAAoC;IAAA;IACxE,IAAI,CAAC,IAAI,CAACC,YAAY,CAACF,KAAK,CAAC,EAAE;MAC7B;;IAGF,IAAI,IAAI,CAAC3B,cAAc,EAAE;MACvB,IAAI,CAAC8B,kBAAkB,CAACH,KAAiB,EAAEC,OAAO,CAAC;KACpD,MAAM,IAAI,IAAI,CAAC3B,WAAW,EAAE;MAC3B,IAAI,CAAC8B,eAAe,CAACJ,KAAe,EAAEC,OAAO,CAAC;KAC/C,MAAM;MACL,IAAI,CAACI,yBAAyB,CAACL,KAAe,EAAEC,OAAO,CAAC;;EAE5D,CAAC;EAED;;;EAGArD,yCAAa,GAAb,UAAc0D,aAAqB;IACjC,IAAIA,aAAa,IAAI,CAAC,EAAE;MACtB,IAAI,CAAC3B,gBAAgB,GAAG2B,aAAa;MACrC,IAAI,CAAC5D,OAAO,CAACuB,2BAA2B,CAACqC,aAAa,EAAE,UAAU,EAAE,GAAG,CAAC;MACxE,IAAI,CAAC5D,OAAO,CAACyB,8BAA8B,CAACmC,aAAa,EAAE,GAAG,CAAC;;EAEnE,CAAC;EAED;;;EAGA1D,0CAAc,GAAd,UAAe0D,aAAqB;IAApC;IACE,IAAIA,aAAa,IAAI,CAAC,EAAE;MACtB,IAAI,CAAC5D,OAAO,CAACuB,2BAA2B,CAACqC,aAAa,EAAE,UAAU,EAAE,IAAI,CAAC;MACzE,IAAI,CAAC5D,OAAO,CAACyB,8BAA8B,CAACmC,aAAa,EAAE,IAAI,CAAC;;IAGlE;;;;IAIAC,UAAU,CAAC;MACT,IAAI,CAACzD,KAAI,CAACJ,OAAO,CAACiB,iBAAiB,EAAE,EAAE;QACrCb,KAAI,CAAC0D,uCAAuC,EAAE;;IAElD,CAAC,EAAE,CAAC,CAAC;EACP,CAAC;EAEO5D,2CAAe,GAAvB,UAAwBoD,KAAa;IACnC,OAAO,IAAI,CAACtD,OAAO,CAACmB,uBAAuB,CACvCmC,KAAK,EAAE5E,UAAU,CAACqF,wBAAwB,CAAC;EACjD,CAAC;EAED;;;EAGA7D,yCAAa,GAAb,UACId,KAAoB,EAAE4E,cAAuB,EAAEJ,aAAqB;IADxE;;IAEE,IAAMK,WAAW,GAAGxF,YAAY,CAACW,KAAK,CAAC,KAAK,WAAW;IACvD,IAAM8E,SAAS,GAAGzF,YAAY,CAACW,KAAK,CAAC,KAAK,SAAS;IACnD,IAAM+E,YAAY,GAAG1F,YAAY,CAACW,KAAK,CAAC,KAAK,YAAY;IACzD,IAAMgF,WAAW,GAAG3F,YAAY,CAACW,KAAK,CAAC,KAAK,WAAW;IACvD,IAAMiF,MAAM,GAAG5F,YAAY,CAACW,KAAK,CAAC,KAAK,MAAM;IAC7C,IAAMkF,KAAK,GAAG7F,YAAY,CAACW,KAAK,CAAC,KAAK,KAAK;IAC3C,IAAMmF,OAAO,GAAG9F,YAAY,CAACW,KAAK,CAAC,KAAK,OAAO;IAC/C,IAAMoF,OAAO,GAAG/F,YAAY,CAACW,KAAK,CAAC,KAAK,UAAU;IAElD;IACA,IAAMqF,SAAS,GACV,IAAI,CAACrC,UAAU,IAAIgC,WAAW,IAAM,CAAC,IAAI,CAAChC,UAAU,IAAI+B,YAAa;IAC1E,IAAMO,MAAM,GACP,IAAI,CAACtC,UAAU,IAAI8B,SAAS,IAAM,CAAC,IAAI,CAAC9B,UAAU,IAAI6B,WAAY;IAEvE;IACA;IACA,IAAMU,SAAS,GAAGvF,KAAK,CAACwF,GAAG,KAAK,GAAG,IAAIxF,KAAK,CAACwF,GAAG,KAAK,GAAG;IAExD,IAAMC,iBAAiB,GAAG1F,qBAAqB,CAACC,KAAK,CAAC;IAEtD,IAAI,IAAI,CAACY,OAAO,CAACkB,aAAa,EAAE,EAAE;MAChC,IAAI,CAACwD,MAAM,IAAIJ,KAAK,KAAKO,iBAAiB,CAAC,EAAE,CAAC,EAAE;QAC9CzF,KAAK,CAAC0F,cAAc,EAAE;QACtB,IAAI,CAACC,gBAAgB,EAAE;OACxB,MAAM,IAAI,CAACN,SAAS,IAAIJ,MAAM,KAAKQ,iBAAiB,CAAC,EAAE,CAAC,EAAE;QACzDzF,KAAK,CAAC0F,cAAc,EAAE;QACtB,IAAI,CAACE,iBAAiB,EAAE;OACzB,MAAM,IACHN,MAAM,IAAIG,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAClD,cAAc,EAAE;QACjEvC,KAAK,CAAC0F,cAAc,EAAE;QACtB,IAAMG,YAAY,GAAG,IAAI,CAACF,gBAAgB,EAAE;QAC5C,IAAIE,YAAY,KAAK,CAAC,CAAC,EAAE;UACvB,IAAI,CAACC,wBAAwB,CAACD,YAAY,EAAE,KAAK,CAAC;;OAErD,MAAM,IACHR,SAAS,IAAII,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAClD,cAAc,EAAE;QACpEvC,KAAK,CAAC0F,cAAc,EAAE;QACtB,IAAMG,YAAY,GAAG,IAAI,CAACD,iBAAiB,EAAE;QAC7C,IAAIC,YAAY,KAAK,CAAC,CAAC,EAAE;UACvB,IAAI,CAACC,wBAAwB,CAACD,YAAY,EAAE,KAAK,CAAC;;;MAItD,IAAI,IAAI,CAACnD,YAAY,EAAE;QACrB,IAAMqD,iBAAiB,GAAgC;UACrD/F,KAAK;UACLsB,gBAAgB,EAAE,UAAC4C,KAAK;YACtBlD,KAAI,CAACM,gBAAgB,CAAC4C,KAAK,CAAC;UAC9B,CAAC;UACDrB,gBAAgB,EAAE,CAAC,CAAC;UACpBmD,gBAAgB,EAAEpB,cAAc;UAChCjC,sBAAsB,EAAE,IAAI,CAACA,sBAAsB;UACnDsD,qBAAqB,EAAE,UAAC/B,KAAK;YAAK,YAAI,CAACgC,eAAe,CAAChC,KAAK,CAAC;UAA3B;SACnC;QAEDxE,SAAS,CAACyG,aAAa,CAACJ,iBAAiB,EAAE,IAAI,CAAClC,cAAc,CAAC;;MAGjE;;IAGF,IAAIuC,YAAY,GAAG,IAAI,CAACxF,OAAO,CAACY,sBAAsB,EAAE;IACxD,IAAI4E,YAAY,KAAK,CAAC,CAAC,EAAE;MACvBA,YAAY,GAAG5B,aAAa;MAC5B,IAAI4B,YAAY,GAAG,CAAC,EAAE;QACpB;QACA;QACA;;;IAIJ,IAAIf,SAAS,IAAII,iBAAiB,CAAC,EAAE,CAAC,EAAE;MACtChG,mBAAmB,CAACO,KAAK,CAAC;MAC1B,IAAI,CAACqG,gBAAgB,CAACD,YAAY,CAAC;KACpC,MAAM,IAAId,MAAM,IAAIG,iBAAiB,CAAC,EAAE,CAAC,EAAE;MAC1ChG,mBAAmB,CAACO,KAAK,CAAC;MAC1B,IAAI,CAACsG,gBAAgB,CAACF,YAAY,CAAC;KACpC,MAAM,IACHf,SAAS,IAAII,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAClD,cAAc,EAAE;MACpE9C,mBAAmB,CAACO,KAAK,CAAC;MAC1B,IAAM6F,YAAY,GAAG,IAAI,CAACQ,gBAAgB,CAACD,YAAY,CAAC;MACxD,IAAIP,YAAY,KAAK,CAAC,CAAC,EAAE;QACvB,IAAI,CAACC,wBAAwB,CAACD,YAAY,EAAE,KAAK,CAAC;;KAErD,MAAM,IAAIP,MAAM,IAAIG,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,IAAI,CAAClD,cAAc,EAAE;MACxE9C,mBAAmB,CAACO,KAAK,CAAC;MAC1B,IAAM6F,YAAY,GAAG,IAAI,CAACS,gBAAgB,CAACF,YAAY,CAAC;MACxD,IAAIP,YAAY,KAAK,CAAC,CAAC,EAAE;QACvB,IAAI,CAACC,wBAAwB,CAACD,YAAY,EAAE,KAAK,CAAC;;KAErD,MAAM,IAAIZ,MAAM,IAAIQ,iBAAiB,CAAC,EAAE,CAAC,EAAE;MAC1ChG,mBAAmB,CAACO,KAAK,CAAC;MAC1B,IAAI,CAAC4F,iBAAiB,EAAE;KACzB,MAAM,IAAIV,KAAK,IAAIO,iBAAiB,CAAC,EAAE,CAAC,EAAE;MACzChG,mBAAmB,CAACO,KAAK,CAAC;MAC1B,IAAI,CAAC2F,gBAAgB,EAAE;KACxB,MAAM,IACHV,MAAM,IAAIQ,iBAAiB,CAAC,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,IACjD,IAAI,CAAClD,cAAc,EAAE;MACvB9C,mBAAmB,CAACO,KAAK,CAAC;MAC1B,IAAI,IAAI,CAACkG,eAAe,CAACE,YAAY,CAAC,EAAE;QACtC;;MAEF,IAAI,CAACR,iBAAiB,EAAE;MACxB,IAAI,CAACW,mBAAmB,CAAC,CAAC,EAAEH,YAAY,EAAEA,YAAY,CAAC;KACxD,MAAM,IACHlB,KAAK,IAAIO,iBAAiB,CAAC,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,IAChD,IAAI,CAAClD,cAAc,EAAE;MACvB9C,mBAAmB,CAACO,KAAK,CAAC;MAC1B,IAAI,IAAI,CAACkG,eAAe,CAACE,YAAY,CAAC,EAAE;QACtC;;MAEF,IAAI,CAACT,gBAAgB,EAAE;MACvB,IAAI,CAACY,mBAAmB,CACpBH,YAAY,EAAE,IAAI,CAACxF,OAAO,CAACa,gBAAgB,EAAE,GAAG,CAAC,EAAE2E,YAAY,CAAC;KACrE,MAAM,IACHb,SAAS,IAAIE,iBAAiB,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,IAAI,CAAClD,cAAc,EAAE;MACtEvC,KAAK,CAAC0F,cAAc,EAAE;MACtB,IAAI,CAACc,qBAAqB,CACtB,IAAI,CAAC5G,aAAa,KAAKL,OAAO,CAAC0B,WAAW,GACtC,EAAE,GACF,IAAI,CAACrB,aAAyB,EAClC,IAAI,CAAC;KACV,MAAM,IAAI,CAACuF,OAAO,IAAIC,OAAO,KAAKK,iBAAiB,CAAC,EAAE,CAAC,EAAE;MACxD,IAAIb,cAAc,EAAE;QAClB;QACA;QACA,IAAM6B,MAAM,GAAGzG,KAAK,CAACyG,MAAwB;QAC7C,IAAIA,MAAM,IAAIA,MAAM,CAACC,OAAO,KAAK,GAAG,IAAIvB,OAAO,EAAE;UAC/C;;QAEF1F,mBAAmB,CAACO,KAAK,CAAC;QAE1B,IAAI,IAAI,CAACkG,eAAe,CAACE,YAAY,CAAC,EAAE;UACtC;;QAGF,IAAI,CAAC,IAAI,CAACO,qBAAqB,EAAE,EAAE;UACjC,IAAI,IAAI,CAACC,gBAAgB,EAAE,EAAE;YAC3B,IAAI,CAACd,wBAAwB,CAACM,YAAY,EAAE,KAAK,CAAC;;UAEpD,IAAI,CAACxF,OAAO,CAACoB,YAAY,CAACoE,YAAY,CAAC;;;KAG5C,MAAM,IACH,CAACjB,OAAO,IAAIC,OAAO,KAAKK,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC,IACpD,IAAI,CAAClD,cAAc,EAAE;MACvB;MACA;MACA,IAAMkE,MAAM,GAAGzG,KAAK,CAACyG,MAAwB;MAC7C,IAAIA,MAAM,IAAIA,MAAM,CAACC,OAAO,KAAK,GAAG,IAAIvB,OAAO,EAAE;QAC/C;;MAEF1F,mBAAmB,CAACO,KAAK,CAAC;MAE1B,IAAI,IAAI,CAACkG,eAAe,CAACE,YAAY,CAAC,EAAE;QACtC;;MAGF,IAAI,CAAC,IAAI,CAACO,qBAAqB,EAAE,EAAE;QACjC,IAAI,CAACJ,mBAAmB,CACpB,UAAI,CAACM,iBAAiB,mCAAIT,YAAY,EAAEA,YAAY,EAAEA,YAAY,CAAC;QACvE,IAAI,CAACxF,OAAO,CAACoB,YAAY,CAACoE,YAAY,CAAC;;;IAI3C,IAAI,IAAI,CAAC1D,YAAY,EAAE;MACrB,IAAMqD,iBAAiB,GAAgC;QACrD/F,KAAK;QACLsB,gBAAgB,EAAE,UAAC4C,KAAK;UAAMlD,KAAI,CAACM,gBAAgB,CAAC4C,KAAK,CAAC;QAAA,CAAC;QAC3DrB,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;QACvCmD,gBAAgB,EAAEpB,cAAc;QAChCjC,sBAAsB,EAAE,IAAI,CAACA,sBAAsB;QACnDsD,qBAAqB,EAAE,UAAC/B,KAAK;UAAK,YAAI,CAACgC,eAAe,CAAChC,KAAK,CAAC;QAA3B;OACnC;MAEDxE,SAAS,CAACyG,aAAa,CAACJ,iBAAiB,EAAE,IAAI,CAAClC,cAAc,CAAC;;EAEnE,CAAC;EAED;;;;;;;;;;EAUA/C,uCAAW,GAAX,UACIoD,KAAa,EAAE4C,iCAA0C,EACzD9G,KAAkB;;IACpB,IAAMyF,iBAAiB,GAAG1F,qBAAqB,CAACC,KAAK,CAAC;IAEtD,IAAIkE,KAAK,KAAK3E,OAAO,CAAC0B,WAAW,EAAE;MACjC;;IAGF,IAAI,IAAI,CAACiF,eAAe,CAAChC,KAAK,CAAC,EAAE;MAC/B;;IAGF,IAAIuB,iBAAiB,CAAC,EAAE,CAAC,EAAE;MACzB,IAAI,IAAI,CAACmB,gBAAgB,EAAE,EAAE;QAC3B,IAAI,CAACd,wBAAwB,CAAC5B,KAAK,EAAE4C,iCAAiC,CAAC;;MAEzE,IAAI,CAAClG,OAAO,CAACoB,YAAY,CAACkC,KAAK,CAAC;KACjC,MAAM,IAAI,IAAI,CAAC3B,cAAc,IAAIkD,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE;MAC9D,IAAI,CAACc,mBAAmB,CAAC,UAAI,CAACM,iBAAiB,mCAAI3C,KAAK,EAAEA,KAAK,EAAEA,KAAK,CAAC;MACvE,IAAI,CAACtD,OAAO,CAACoB,YAAY,CAACkC,KAAK,CAAC;;EAEpC,CAAC;EAED;;;EAGApD,4CAAgB,GAAhB,UAAiBoD,KAAa;IAC5B,IAAM6C,KAAK,GAAG,IAAI,CAACnG,OAAO,CAACa,gBAAgB,EAAE;IAC7C,IAAIuF,SAAS,GAAG9C,KAAK;IACrB,IAAI+C,YAAY,GAAG,IAAI;IAEvB,GAAG;MACDD,SAAS,EAAE;MACX,IAAIA,SAAS,IAAID,KAAK,EAAE;QACtB,IAAI,IAAI,CAAChE,SAAS,EAAE;UAClBiE,SAAS,GAAG,CAAC;SACd,MAAM;UACL;UACA,OAAO9C,KAAK;;;MAGhB,IAAI8C,SAAS,KAAKC,YAAY,EAAE;QAC9B,OAAO,CAAC,CAAC;;MAEXA,YAAY,GAAGA,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAID,SAAS;KACzC,QAAQ,CAAC,IAAI,CAAC7D,yBAAyB,IAAI,IAAI,CAAC+C,eAAe,CAACc,SAAS,CAAC;IAE3E,IAAI,CAAC1F,gBAAgB,CAAC0F,SAAS,CAAC;IAChC,OAAOA,SAAS;EAClB,CAAC;EAED;;;EAGAlG,4CAAgB,GAAhB,UAAiBoD,KAAa;IAC5B,IAAM6C,KAAK,GAAG,IAAI,CAACnG,OAAO,CAACa,gBAAgB,EAAE;IAC7C,IAAIyF,SAAS,GAAGhD,KAAK;IACrB,IAAI+C,YAAY,GAAG,IAAI;IAEvB,GAAG;MACDC,SAAS,EAAE;MACX,IAAIA,SAAS,GAAG,CAAC,EAAE;QACjB,IAAI,IAAI,CAACnE,SAAS,EAAE;UAClBmE,SAAS,GAAGH,KAAK,GAAG,CAAC;SACtB,MAAM;UACL;UACA,OAAO7C,KAAK;;;MAGhB,IAAIgD,SAAS,KAAKD,YAAY,EAAE;QAC9B,OAAO,CAAC,CAAC;;MAEXA,YAAY,GAAGA,YAAY,aAAZA,YAAY,cAAZA,YAAY,GAAIC,SAAS;KACzC,QAAQ,CAAC,IAAI,CAAC/D,yBAAyB,IAAI,IAAI,CAAC+C,eAAe,CAACgB,SAAS,CAAC;IAE3E,IAAI,CAAC5F,gBAAgB,CAAC4F,SAAS,CAAC;IAChC,OAAOA,SAAS;EAClB,CAAC;EAEDpG,6CAAiB,GAAjB;IACE;IACA;IACA,OAAO,IAAI,CAACuF,gBAAgB,CAAC,CAAC,CAAC,CAAC;EAClC,CAAC;EAEDvF,4CAAgB,GAAhB;IACE;IACA;IACA,OAAO,IAAI,CAACwF,gBAAgB,CAAC,IAAI,CAAC1F,OAAO,CAACa,gBAAgB,EAAE,CAAC;EAC/D,CAAC;EAEDX,+CAAmB,GAAnB;IACE,IAAMqG,YAAY,GAAG,IAAI,CAACC,kCAAkC,EAAE;IAC9D,IAAI,CAAC9F,gBAAgB,CAAC6F,YAAY,CAAC;IACnC,OAAOA,YAAY;EACrB,CAAC;EAED;;;;EAIArG,sCAAU,GAAV,UAAWuG,SAAiB,EAAEC,SAAkB;IAC9C,IAAI,CAAC,IAAI,CAAClD,YAAY,CAACiD,SAAS,EAAE,KAAK,CAAC,EAAE;MACxC;;IAGF,IAAIC,SAAS,EAAE;MACb,IAAI,CAAC1G,OAAO,CAACsB,0BAA0B,CACnCmF,SAAS,EAAE/H,UAAU,CAACqF,wBAAwB,CAAC;MACnD,IAAI,CAAC/D,OAAO,CAACuB,2BAA2B,CACpCkF,SAAS,EAAE7H,OAAO,CAAC+H,aAAa,EAAE,OAAO,CAAC;KAC/C,MAAM;MACL,IAAI,CAAC3G,OAAO,CAACS,uBAAuB,CAChCgG,SAAS,EAAE/H,UAAU,CAACqF,wBAAwB,CAAC;MACnD,IAAI,CAAC/D,OAAO,CAACuB,2BAA2B,CACpCkF,SAAS,EAAE7H,OAAO,CAAC+H,aAAa,EAAE,MAAM,CAAC;;EAEjD,CAAC;EAEOzG,qDAAyB,GAAjC,UACIoD,KAAa,EAAEC,OAAoC;IAApC;MAAAA,YAAoC;IAAA;IACrD,IAAI,IAAI,CAACvE,aAAa,KAAKsE,KAAK,IAAI,CAACC,OAAO,CAACqD,WAAW,EAAE;MACxD;;IAGF,IAAIC,iBAAiB,GAAGnI,UAAU,CAACqE,wBAAwB;IAC3D,IAAI,IAAI,CAACI,iBAAiB,EAAE;MAC1B0D,iBAAiB,GAAGnI,UAAU,CAACgE,yBAAyB;;IAG1D,IAAI,IAAI,CAAC1D,aAAa,KAAKL,OAAO,CAAC0B,WAAW,EAAE;MAC9C,IAAI,CAACL,OAAO,CAACsB,0BAA0B,CACnC,IAAI,CAACtC,aAAuB,EAAE6H,iBAAiB,CAAC;;IAGtD,IAAI,CAACC,gCAAgC,CAACxD,KAAK,CAAC;IAC5C,IAAI,CAACyD,kBAAkB,CAACzD,KAAK,CAAC;IAC9B,IAAIA,KAAK,KAAK3E,OAAO,CAAC0B,WAAW,EAAE;MACjC,IAAI,CAACL,OAAO,CAACS,uBAAuB,CAAC6C,KAAK,EAAEuD,iBAAiB,CAAC;;IAGhE,IAAI,CAAC7H,aAAa,GAAGsE,KAAK;IAE1B;IACA;IACA,IAAIC,OAAO,CAACyD,iBAAiB,IAAI,CAACzD,OAAO,CAACqD,WAAW,EAAE;MACrD,IAAI,CAAC5G,OAAO,CAACqB,qBAAqB,CAAC,CAACiC,KAAK,CAAC,CAAC;;EAE/C,CAAC;EAED;;;EAGQpD,4DAAgC,GAAxC,UAAyCoD,KAAa;IACpD;IACA;IACA,IAAI,IAAI,CAACtE,aAAa,KAAKL,OAAO,CAAC0B,WAAW,EAAE;MAC9C,IAAI,CAAC4G,oBAAoB,GACrB,IAAI,CAACjH,OAAO,CAACW,2BAA2B,CAAC2C,KAAK,EAAE1E,OAAO,CAACsI,YAAY,CAAC;;IAG3E,IAAMC,aAAa,GAAG,IAAI,CAACF,oBAAoB,KAAK,IAAI;IACxD,IAAMG,aAAa,GACfD,aAAa,GAAGvI,OAAO,CAACsI,YAAY,GAAGtI,OAAO,CAACyI,aAAa;IAEhE,IAAI,IAAI,CAACrI,aAAa,KAAKL,OAAO,CAAC0B,WAAW,EAAE;MAC9C,IAAI,CAACL,OAAO,CAACuB,2BAA2B,CACpC,IAAI,CAACvC,aAAuB,EAAEoI,aAAa,EAAE,OAAO,CAAC;;IAG3D,IAAI9D,KAAK,KAAK3E,OAAO,CAAC0B,WAAW,EAAE;MACjC,IAAMiH,kBAAkB,GACpBH,aAAa,GAAG,IAAI,CAACF,oBAAoB,GAAG,MAAM;MACtD,IAAI,CAACjH,OAAO,CAACuB,2BAA2B,CACpC+B,KAAK,EAAE8D,aAAa,EAAEE,kBAA4B,CAAC;;EAE3D,CAAC;EAED;;;EAGQpH,iDAAqB,GAA7B;IACE,OAAO,IAAI,CAACmD,eAAe,GAAGzE,OAAO,CAACyI,aAAa,GAAGzI,OAAO,CAAC2I,YAAY;EAC5E,CAAC;EAED;;;;EAIQrH,2CAAe,GAAvB,UAAwBoD,KAAa,EAAEC,OAAoC;IAApC;MAAAA,YAAoC;IAAA;IACzE,IAAMiE,kBAAkB,GAAG,IAAI,CAACC,qBAAqB,EAAE;IACvD,IAAI,CAACzH,OAAO,CAACwB,gCAAgC,CAAC8B,KAAK,EAAE,IAAI,CAAC;IAE1D,IAAI,IAAI,CAACtE,aAAa,KAAKsE,KAAK,IAAI,CAACC,OAAO,CAACqD,WAAW,EAAE;MACxD;;IAGF,IAAI,IAAI,CAAC5H,aAAa,KAAKL,OAAO,CAAC0B,WAAW,EAAE;MAC9C,IAAI,CAACL,OAAO,CAACuB,2BAA2B,CACpC,IAAI,CAACvC,aAAuB,EAAEwI,kBAAkB,EAAE,OAAO,CAAC;;IAGhE,IAAI,CAACxH,OAAO,CAACuB,2BAA2B,CAAC+B,KAAK,EAAEkE,kBAAkB,EAAE,MAAM,CAAC;IAE3E,IAAI,CAACxI,aAAa,GAAGsE,KAAK;IAE1B;IACA;IACA,IAAIC,OAAO,CAACyD,iBAAiB,IAAI,CAACzD,OAAO,CAACqD,WAAW,EAAE;MACrD,IAAI,CAAC5G,OAAO,CAACqB,qBAAqB,CAAC,CAACiC,KAAK,CAAC,CAAC;;EAE/C,CAAC;EAEOpD,8CAAkB,GAA1B,UACIoD,KAAe,EAAEC,OAAoC;IAApC;MAAAA,YAAoC;IAAA;IACvD,IAAMiC,YAAY,GAAG,IAAI,CAACxG,aAAa;IACvC;IACA;IACA;IACA,IAAM0I,iBAAiB,GAAGnE,OAAO,CAACyD,iBAAiB,GAC/C,IAAI1H,GAAG,CACHkG,YAAY,KAAK7G,OAAO,CAAC0B,WAAW,GAAG,EAAE,GACFmF,YAAwB,CAAC,GACpE,IAAI;IACR,IAAMgC,kBAAkB,GAAG,IAAI,CAACC,qBAAqB,EAAE;IACvD,IAAME,cAAc,GAAG,EAAE;IAEzB,KAAK,IAAI9E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC7C,OAAO,CAACa,gBAAgB,EAAE,EAAEgC,CAAC,EAAE,EAAE;MACxD,IAAM+E,iBAAiB,GAAGF,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAE9H,GAAG,CAACiD,CAAC,CAAC;MACnD,IAAMgF,YAAY,GAAGvE,KAAK,CAACwE,OAAO,CAACjF,CAAC,CAAC,IAAI,CAAC;MAE1C;MACA;MACA,IAAIgF,YAAY,KAAKD,iBAAiB,EAAE;QACtCD,cAAc,CAACI,IAAI,CAAClF,CAAC,CAAC;;MAGxB,IAAI,CAAC7C,OAAO,CAACwB,gCAAgC,CAACqB,CAAC,EAAEgF,YAAY,CAAC;MAC9D,IAAI,CAAC7H,OAAO,CAACuB,2BAA2B,CACpCsB,CAAC,EAAE2E,kBAAkB,EAAEK,YAAY,GAAG,MAAM,GAAG,OAAO,CAAC;;IAG7D,IAAI,CAAC7I,aAAa,GAAGsE,KAAK;IAE1B;IACA;IACA,IAAIC,OAAO,CAACyD,iBAAiB,IAAIW,cAAc,CAAC9H,MAAM,EAAE;MACtD,IAAI,CAACG,OAAO,CAACqB,qBAAqB,CAACsG,cAAc,CAAC;;EAEtD,CAAC;EAED;;;;;;;;;;;EAWQzH,+CAAmB,GAA3B,UACI8H,SAAiB,EAAEC,OAAe,EAAEC,WAAmB;IACzD,IAAI,CAACjC,iBAAiB,GAAGiC,WAAW;IACpC,IAAMR,iBAAiB,GAAG,IAAIpI,GAAG,CAC7B,IAAI,CAACN,aAAa,KAAKL,OAAO,CAAC0B,WAAW,GACtC,EAAE,GACF,IAAI,CAACrB,aAAyB,CAAC;IACvC,IAAM6I,YAAY,GAAG,EAACH,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAE9H,GAAG,CAACsI,WAAW,CAAC;IAEnD,gBAAyB,CAACF,SAAS,EAAEC,OAAO,CAAC,CAACE,IAAI,EAAE;MAAnDC,UAAU;MAAEC,QAAQ,QAA+B;IAC1D,IAAMb,kBAAkB,GAAG,IAAI,CAACC,qBAAqB,EAAE;IACvD,IAAME,cAAc,GAAG,EAAE;IAEzB,KAAK,IAAI9E,CAAC,GAAGuF,UAAU,EAAEvF,CAAC,IAAIwF,QAAQ,EAAExF,CAAC,EAAE,EAAE;MAC3C,IAAI,IAAI,CAACyC,eAAe,CAACzC,CAAC,CAAC,EAAE;QAC3B;;MAEF,IAAM+E,iBAAiB,GAAGF,iBAAiB,CAAC9H,GAAG,CAACiD,CAAC,CAAC;MAElD;MACA;MACA,IAAIgF,YAAY,KAAKD,iBAAiB,EAAE;QACtCD,cAAc,CAACI,IAAI,CAAClF,CAAC,CAAC;QACtB,IAAI,CAAC7C,OAAO,CAACwB,gCAAgC,CAACqB,CAAC,EAAEgF,YAAY,CAAC;QAC9D,IAAI,CAAC7H,OAAO,CAACuB,2BAA2B,CACpCsB,CAAC,EAAE2E,kBAAkB,EAAE,KAAGK,YAAc,CAAC;QAC7C,IAAIA,YAAY,EAAE;UAChBH,iBAAiB,CAACY,GAAG,CAACzF,CAAC,CAAC;SACzB,MAAM;UACL6E,iBAAiB,CAACa,MAAM,CAAC1F,CAAC,CAAC;;;;IAKjC;IACA;IACA,IAAI8E,cAAc,CAAC9H,MAAM,EAAE;MACzB,IAAI,CAACb,aAAa,4BAAO0I,iBAAiB,EAAC;MAC3C,IAAI,CAAC1H,OAAO,CAACqB,qBAAqB,CAACsG,cAAc,CAAC;;EAEtD,CAAC;EAEOzH,8CAAkB,GAA1B,UAA2BoD,KAAa;IACtC,IAAI,IAAI,CAACrB,gBAAgB,KAAKtD,OAAO,CAAC0B,WAAW,IAAIiD,KAAK,KAAK,CAAC,EAAE;MAChE;MACA;MACA;MACA,IAAI,CAACtD,OAAO,CAACuB,2BAA2B,CAAC,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC;KAC9D,MAAM,IAAI,IAAI,CAACU,gBAAgB,IAAI,CAAC,IAAI,IAAI,CAACA,gBAAgB,KAAKqB,KAAK,EAAE;MACxE,IAAI,CAACtD,OAAO,CAACuB,2BAA2B,CACpC,IAAI,CAACU,gBAAgB,EAAE,UAAU,EAAE,IAAI,CAAC;;IAG9C;IACA;IACA;IACA,IAAI,EAAE,IAAI,CAACjD,aAAa,YAAYC,KAAK,CAAC,IACtC,IAAI,CAACD,aAAa,KAAKsE,KAAK,EAAE;MAChC,IAAI,CAACtD,OAAO,CAACuB,2BAA2B,CACpC,IAAI,CAACvC,aAAa,EAAE,UAAU,EAAE,IAAI,CAAC;;IAG3C,IAAIsE,KAAK,KAAK3E,OAAO,CAAC0B,WAAW,EAAE;MACjC,IAAI,CAACL,OAAO,CAACuB,2BAA2B,CAAC+B,KAAK,EAAE,UAAU,EAAE,GAAG,CAAC;;EAEpE,CAAC;EAED;;;;EAIQpD,4CAAgB,GAAxB;IACE,OAAO,IAAI,CAACmC,qBAAqB,IAAI,IAAI,CAACV,cAAc,IACpD,IAAI,CAACC,WAAW;EACtB,CAAC;EAEO1B,mEAAuC,GAA/C;IACE,IAAMsI,WAAW,GAAG,IAAI,CAAChC,kCAAkC,EAAE;IAC7D,IAAI,CAACO,kBAAkB,CAACyB,WAAW,CAAC;EACtC,CAAC;EAEOtI,8DAAkC,GAA1C;IACE;IACA,IAAI,CAAC,IAAI,CAAC8F,gBAAgB,EAAE,EAAE;MAC5B,OAAOyC,IAAI,CAACC,GAAG,CAAC,IAAI,CAACzG,gBAAgB,EAAE,CAAC,CAAC;;IAG3C;IACA,IAAI,OAAO,IAAI,CAACjD,aAAa,KAAK,QAAQ,IACtC,IAAI,CAACA,aAAa,KAAKL,OAAO,CAAC0B,WAAW,EAAE;MAC9C,OAAO,IAAI,CAACrB,aAAa;;IAG3B;IACA,IAAID,aAAa,CAAC,IAAI,CAACC,aAAa,CAAC,IAAI,IAAI,CAACA,aAAa,CAACa,MAAM,GAAG,CAAC,EAAE;MACtE,OAAO,IAAI,CAACb,aAAa,CAAC2J,MAAM,CAC5B,UAACC,QAAQ,EAAEpD,YAAY;QAAK,WAAI,CAACqD,GAAG,CAACD,QAAQ,EAAEpD,YAAY,CAAC;MAAhC,CAAgC,CAAC;;IAGnE;IACA,OAAO,CAAC;EACV,CAAC;EAEOtF,wCAAY,GAApB,UAAqBoD,KAAmB,EAAEwF,gBAAgC;IAA1E;IAA0C;MAAAA,uBAAgC;IAAA;IACxE,IAAIxF,KAAK,YAAYrE,KAAK,EAAE;MAC1B,IAAI,CAAC,IAAI,CAAC0C,cAAc,IAAImH,gBAAgB,EAAE;QAC5C,MAAM,IAAIC,KAAK,CACX,6EAA6E,CAAC;;MAGpF,IAAIzF,KAAK,CAACzD,MAAM,KAAK,CAAC,EAAE;QACtB,OAAO,IAAI;OACZ,MAAM;QACL,OAAOyD,KAAK,CAAC0F,IAAI,CAAC,UAACnG,CAAC;UAAK,YAAI,CAACoG,cAAc,CAACpG,CAAC,CAAC;QAAtB,CAAsB,CAAC;;KAEnD,MAAM,IAAI,OAAOS,KAAK,KAAK,QAAQ,EAAE;MACpC,IAAI,IAAI,CAAC3B,cAAc,IAAImH,gBAAgB,EAAE;QAC3C,MAAM,IAAIC,KAAK,CACX,wFACIzF,KAAO,CAAC;;MAElB,OAAO,IAAI,CAAC2F,cAAc,CAAC3F,KAAK,CAAC,IAC7B,IAAI,CAACjB,qBAAqB,IAAIiB,KAAK,KAAK3E,OAAO,CAAC0B,WAAW;KAChE,MAAM;MACL,OAAO,KAAK;;EAEhB,CAAC;EAEOH,0CAAc,GAAtB,UAAuBoD,KAAa;IAClC,IAAM4F,QAAQ,GAAG,IAAI,CAAClJ,OAAO,CAACa,gBAAgB,EAAE;IAChD,OAAOyC,KAAK,IAAI,CAAC,IAAIA,KAAK,GAAG4F,QAAQ;EACvC,CAAC;EAED;;;;;;;;;;EAUQhJ,oDAAwB,GAAhC,UACIoD,KAAa,EAAE4C,iCAA0C;IAC3D,IAAI,CAACD,iBAAiB,GAAG3C,KAAK;IAC9B,IAAI,IAAI,CAAC3B,cAAc,EAAE;MACvB,IAAI,CAACwH,qBAAqB,CAAC7F,KAAK,EAAE4C,iCAAiC,CAAC;MACpE,IAAI,CAAClG,OAAO,CAACqB,qBAAqB,CAAC,CAACiC,KAAK,CAAC,CAAC;KAC5C,MAAM;MACL,IAAI,CAAC8F,gBAAgB,CAAC9F,KAAK,EAAE;QAAC0D,iBAAiB,EAAE;MAAI,CAAC,CAAC;;EAE3D,CAAC;EAEO9G,iDAAqB,GAA7B,UACIoD,KAAa,EAAE4C,iCAA0C;IAC3D,IAAMsB,kBAAkB,GAAG,IAAI,CAACC,qBAAqB,EAAE;IACvD,IAAM4B,gBAAgB,GAAG,IAAI,CAACrJ,OAAO,CAACgB,wBAAwB,CAACsC,KAAK,CAAC;IAErE;IACA;IACA;IACA;IACA,IAAIgG,eAAe;IACnB,IAAIpD,iCAAiC,EAAE;MACrCoD,eAAe,GAAGD,gBAAgB;KACnC,MAAM;MACLC,eAAe,GAAG,CAACD,gBAAgB;MACnC,IAAI,CAACrJ,OAAO,CAACwB,gCAAgC,CAAC8B,KAAK,EAAEgG,eAAe,CAAC;;IAGvE,IAAI,CAACtJ,OAAO,CAACuB,2BAA2B,CACpC+B,KAAK,EAAEkE,kBAAkB,EAAE8B,eAAe,GAAG,MAAM,GAAG,OAAO,CAAC;IAElE;IACA;IACA,IAAIC,eAAe,GAAG,IAAI,CAACvK,aAAa,KAAKL,OAAO,CAAC0B,WAAW,GAC5D,EAAE,GACD,IAAI,CAACrB,aAA0B,CAACwK,KAAK,EAAE;IAE5C,IAAIF,eAAe,EAAE;MACnBC,eAAe,CAACxB,IAAI,CAACzE,KAAK,CAAC;KAC5B,MAAM;MACLiG,eAAe,GAAGA,eAAe,CAAChK,MAAM,CAAC,UAACsD,CAAC;QAAK,QAAC,KAAKS,KAAK;MAAX,CAAW,CAAC;;IAG9D,IAAI,CAACtE,aAAa,GAAGuK,eAAe;EACtC,CAAC;EAEOrJ,4CAAgB,GAAxB,UAAyBoD,KAAa;IACpC,IAAI,CAACtD,OAAO,CAACU,gBAAgB,CAAC4C,KAAK,CAAC;IACpC,IAAI,CAACrB,gBAAgB,GAAGqB,KAAK;EAC/B,CAAC;EAEOpD,iDAAqB,GAA7B,UACIuJ,wBAAkC,EAAEzC,iBAA0B;IAChE,IAAMb,KAAK,GAAG,IAAI,CAACnG,OAAO,CAACa,gBAAgB,EAAE;IAE7C;IACA,IAAI4I,wBAAwB,CAAC5J,MAAM,KAAKsG,KAAK,EAAE;MAC7C,IAAI,CAAC1C,kBAAkB,CAAC,EAAE,EAAE;QAACuD,iBAAiB;MAAA,CAAC,CAAC;KACjD,MAAM;MACL;MACA,IAAM0C,UAAU,GAAa,EAAE;MAC/B,KAAK,IAAI7G,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsD,KAAK,EAAEtD,CAAC,EAAE,EAAE;QAC9B,IAAI,CAAC,IAAI,CAACyC,eAAe,CAACzC,CAAC,CAAC,IACxB4G,wBAAwB,CAAC3B,OAAO,CAACjF,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;UAC5C6G,UAAU,CAAC3B,IAAI,CAAClF,CAAC,CAAC;;;MAGtB,IAAI,CAACY,kBAAkB,CAACiG,UAAU,EAAE;QAAC1C,iBAAiB;MAAA,CAAC,CAAC;;EAE5D,CAAC;EAED;;;;;;;;;;;;;EAaA9G,8CAAkB,GAAlB,UACIyJ,QAAgB,EAAEC,aAAsB,EAAEC,SAAiB;IAD/D;IAC8C;MAAAA,iBAAiB;IAAA;IAC7D,IAAMC,IAAI,GAAqC;MAC7CpJ,gBAAgB,EAAE,UAAC4C,KAAK;QACtBlD,KAAI,CAACM,gBAAgB,CAAC4C,KAAK,CAAC;MAC9B,CAAC;MACDrB,gBAAgB,EAAE2H,aAAa,GAAGA,aAAa,GAAG,IAAI,CAAC3H,gBAAgB;MACvE0H,QAAQ;MACR5H,sBAAsB,EAAE,IAAI,CAACA,sBAAsB;MACnD8H,SAAS;MACTxE,qBAAqB,EAAE,UAAC/B,KAAK;QAAK,YAAI,CAACgC,eAAe,CAAChC,KAAK,CAAC;MAA3B;KACnC;IACD,OAAOxE,SAAS,CAACiL,SAAS,CAACD,IAAI,EAAE,IAAI,CAAC7G,cAAc,CAAC;EACvD,CAAC;EAED;;;;;;EAMQ/C,oDAAwB,GAAhC;IACE,OAAOpB,SAAS,CAACkL,eAAe,CAC5B,IAAI,CAAChK,OAAO,CAACa,gBAAgB,EAAE,EAAE,IAAI,CAACb,OAAO,CAAC0B,qBAAqB,CAAC;EAC1E,CAAC;EAED;;;EAGAxB,gDAAoB,GAApB;IACEpB,SAAS,CAACmL,WAAW,CAAC,IAAI,CAAChH,cAAc,CAAC;EAC5C,CAAC;EACH,wBAAC;AAAD,CAAC,CAr7BsCzE,aAAa;;AAu7BpD;AACA,eAAe0B,iBAAiB","names":["MDCFoundation","normalizeKey","cssClasses","numbers","strings","preventDefaultEvent","typeahead","isNumberArray","selectedIndex","Array","handledModifierKeys","createModifierChecker","event","eventModifiers","Set","filter","getModifierState","m","modifiers","every","has","length","size","__extends","adapter","_super","MDCListFoundation","defaultAdapter","_this","UNSET_INDEX","initState","Map","Object","addClassForElementIndex","focusItemAtIndex","getAttributeForElementIndex","getFocusedElementIndex","getListItemCount","hasCheckboxAtIndex","hasRadioAtIndex","isCheckboxCheckedAtIndex","isFocusInsideList","isRootFocused","listItemAtIndexHasClass","notifyAction","notifySelectionChange","removeClassForElementIndex","setAttributeForElementIndex","setCheckedCheckboxOrRadioAtIndex","setTabIndexForListItemChildren","getPrimaryTextAtIndex","isCheckboxList","isRadioList","maybeInitializeSingleSelection","hasTypeahead","sortedIndexByFirstChar","typeaheadInitSortedIndex","focusedItemIndex","value","wrapFocus","isVertical","isSingleSelectionList","getSelectedIndexFromDOM","areDisabledItemsFocusable","selectedItemIndex","hasActivatedClass","LIST_ITEM_ACTIVATED_CLASS","setUseActivatedClass","listItemsCount","i","hasSelectedClass","LIST_ITEM_SELECTED_CLASS","isTypingInProgress","typeaheadState","useActivated","useActivatedClass","useSelected","useSelectedAttr","index","options","isIndexValid","setCheckboxAtIndex","setRadioAtIndex","setSingleSelectionAtIndex","listItemIndex","setTimeout","setTabindexToFirstSelectedOrFocusedItem","LIST_ITEM_DISABLED_CLASS","isRootListItem","isArrowLeft","isArrowUp","isArrowRight","isArrowDown","isHome","isEnd","isEnter","isSpace","isForward","isBack","isLetterA","key","eventHasModifiers","preventDefault","focusLastElement","focusFirstElement","focusedIndex","setSelectedIndexOnAction","handleKeydownOpts","isTargetListItem","isItemAtIndexDisabled","isIndexDisabled","handleKeydown","currentIndex","focusNextElement","focusPrevElement","toggleCheckboxRange","checkboxListToggleAll","target","tagName","isTypeaheadInProgress","isSelectableList","lastSelectedIndex","isCheckboxAlreadyUpdatedInAdapter","count","nextIndex","firstChecked","prevIndex","initialIndex","getFirstSelectedOrFocusedItemIndex","itemIndex","isEnabled","ARIA_DISABLED","forceUpdate","selectedClassName","setAriaForSingleSelectionAtIndex","setTabindexAtIndex","isUserInteraction","ariaCurrentAttrValue","ARIA_CURRENT","isAriaCurrent","ariaAttribute","ARIA_SELECTED","ariaAttributeValue","ARIA_CHECKED","selectionAttribute","getSelectionAttribute","currentlySelected","changedIndices","previousIsChecked","newIsChecked","indexOf","push","fromIndex","toIndex","toggleIndex","sort","startIndex","endIndex","add","delete","targetIndex","Math","max","reduce","minIndex","min","validateListType","Error","some","isIndexInRange","listSize","toggleCheckboxAtIndex","setSelectedIndex","adapterIsChecked","newCheckedValue","selectedIndexes","slice","currentlySelectedIndexes","allIndexes","nextChar","startingIndex","skipFocus","opts","matchItem","initSortedIndex","clearBuffer"],"sources":["foundation.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}